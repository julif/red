<!doctype html>
<html>
<head>
  <title>Webapp</title>
  <meta name="viewport" content="width=device-width,  initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta charset="utf-8"/>
  <link rel="manifest" href="manifest.json">  
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script><!-- --- Jquery --- -->
  <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>



  <!-- <meta name="application-name" content="web-app "> -->
  <!-- <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="application-name" content="web-app ">
  <meta name="apple-mobile-web-app-title" content="web-app ">
  <meta name="msapplication-starturl" content="/">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> -->
  <link rel="apple-touch-icon-precomposed" sizes="57x57" href="img/apple-touch-icon-57x57.png" />
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="img/apple-touch-icon-114x114.png" />
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="img/apple-touch-icon-72x72.png" />
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="img/apple-touch-icon-144x144.png" />
  <link rel="apple-touch-icon-precomposed" sizes="60x60" href="img/apple-touch-icon-60x60.png" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="img/apple-touch-icon-120x120.png" />
  <link rel="apple-touch-icon-precomposed" sizes="76x76" href="img/apple-touch-icon-76x76.png" />
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="img/apple-touch-icon-152x152.png" />
  <link rel="icon" type="image/png" href="img/favicon-196x196.png" sizes="196x196" />
  <link rel="icon" type="image/png" href="img/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/png" href="img/favicon-32x32.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="img/favicon-16x16.png" sizes="16x16" />
  <link rel="icon" type="image/png" href="img/favicon-128.png" sizes="128x128" />
  <meta name="application-name" content="&nbsp;"/>
  <meta name="msapplication-TileColor" content="#FFFFFF" />
  <meta name="msapplication-TileImage" content="img/mstile-144x144.png" />
  <meta name="msapplication-square70x70logo" content="img/mstile-70x70.png" />
  <meta name="msapplication-square150x150logo" content="img/mstile-150x150.png" />
  <meta name="msapplication-wide310x150logo" content="img/mstile-310x150.png" />
  <meta name="msapplication-square310x310logo" content="img/mstile-310x310.png" />
  <script type="text/javascript">
    if (navigator.serviceWorker) {
      navigator.serviceWorker.register('sw.js').then(function(registration) {
        console.log('ServiceWorker registration successful with scope:',  registration.scope);
      }).catch(function(error) {
        console.log('ServiceWorker registration failed:', errror);
      });
    }
  </script>
  <!--  font awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
  <!--  animate.css -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
  <!-- css -->
  <link rel="stylesheet" href="style.css"> 
  <link rel="stylesheet" href="css/portrait.css"> 
  <link rel="stylesheet" href="css/ad2hs_prompt.css"> 
  <link rel="stylesheet" href="css/full.css"> 
  <link rel="stylesheet" href="css/animations.css"> 
  <style>/* extra css */</style>
</head>
<body id="contenedor">
  <div id="full">
    <button id="fullwiev" onclick="lock('landscape')">
      <i class="fa fa-expand"></i>
    </button>
  </div>
  <portrait id="portrait"> 
    <section> 
    <img src="img/portrait_roja.png"> 
    </section> 
  </portrait>
  <landscape id="landscape"> 
    <section id="splash">
      <img src="julif.svg">
      <!-- precargar imagen de splash_art -->
      <div  id="precarga_img_splash-art" class="preloader"><!-- contenido del preloader --></div>
    </section>
    <section id="splash_art"  style="display: none;">
      <div style="text-align: center;">
        <img src="img/logo4.png" style="width: 45%;height: auto;">
    <div id="preloader_container">
      <div id="preloader_bar_background">
        <div id="preloader_bar"></div>
      </div>
    </div>
    </div>
    </section>
    <div  id="precarga_main_menu" class="preloader"><!-- contenido del preloader --></div>
    <section id="main_menu"  style="display: none;"> main menu </section>
  </landscape>
  <!--  ad2hs prompt  -->
  <div id="ad2hs-prompt-container"  class="animate__slideInUp">
    <div id="ad2hs-prompt-container-content"> 
      <div id="ad2hs-logo-container"> <img src="img/apple-touch-icon-60x60.png"> </div> 
      <div id="ad2hs-name-description-container"> 
        <div id="ad2hs-close"> <i  style="color: #b7b6b6" class="fas fa-times"></i> </div>
        <b><p id="ad2hs_app_name"  style="color: black;font-size: 20px;"> Webapp </p></b>
        <p id="ad2hs_web_name" style="color: #b7b6b6;font-size: 15px;"> Julif.github.com </p>
      </div> 
    </div> 
    <div id="ad2hs-prompt-container-footer"> <button id="ad2hs-button">Add to home screen</button> </div>
  </div> 
  <p id="version" style="
  position: absolute;
  position: fixed;
  z-index: 1000000;
  right: 20px;
  color: #bbbbbb;
  bottom: 1px;"> v 0.1 </p>
</body> 
<script type="text/javascript" src="js/ad2hs_prompt.js"></script>
<script type="text/javascript" src="js/fade_div.js"></script>
<script type="text/javascript" src="js/fullscreen.js"></script>
<script type="text/javascript" src="app_info.js"></script>
<script> 
  document.title = app_name;
  document.querySelector('#ad2hs_app_name').innerHTML =  app_name;
  document.querySelector('#ad2hs_web_name').innerHTML =  app_web;
  document.querySelector('#version').innerHTML =  app_version;
  // $('meta[name=application-name]').attr('content',  app_name );
</script>  
<script>/* extra js */
// setTimeout(function(){  fadediv(splash,splash_art);  }, 4000);






// esconder el boton fullwiev si la pantalla ya esta en maximisada
if (window.matchMedia('(display-mode: fullscreen)').matches) {  
    // do things here  
    // set a variable to be used when calling something  
    // e.g. call Google Analytics to track standalone use 
    document.getElementById("full").style.display= "none";
    //  iniciar_splash();

} 







var splash_art_imagenes_cargadas = 0;
var splash_art_numero_total;
var splash_art_imagenes_a_cargar = [
  "splash-art-backgorund.png", 
  "logo4.png"
];
  
var main_menu_imagenes_cargadas = 0;
var main_menu_numero_total;
var main_menu_imagenes_a_cargar = [
  "splash-art-backgorund2.png", 
  "splash-art-backgorund4.png"
];

precarga_splash_art( splash_art_imagenes_a_cargar );

function precarga_splash_art(item){ 
  splash_art_numero_total =  item.length;
  item.forEach(splash_art_mostrar_imagenes_en_preloader);
  
  function splash_art_mostrar_imagenes_en_preloader(item, index){
    document.getElementById("precarga_img_splash-art").innerHTML +=    '<img  id="preloaded_element_'+ index +'" src="img/'+ item +'" >' ;
  }
  var splash_art_imagenes_en_preloader = $('#precarga_img_splash-art').children('img').map(function(){   return $(this).attr('id'); }).get()
  splash_art_imagenes_en_preloader.forEach( splash_art_precargar_imagenes );
  
  function splash_art_precargar_imagenes(item, index){
    item ="#"+ item;
    $(item).on('load', function() {
      splash_art_imagenes_cargadas++;
      // console.log(   "cargada imagen: "+ splash_art_imagenes_cargadas +" de "+ splash_art_numero_total );
      // ------------- calcular y mostrar el porcentaje -----------------
      splash_art_porcentaje = splash_art_imagenes_cargadas* 100/  splash_art_numero_total;   // saco el porcentaje de las imagenes cargadas
      splash_art_porcentaje = splash_art_porcentaje.toFixed() //convertir en numero entero
      splash_art_porcentaje =  splash_art_porcentaje + "%" ;
      //document.getElementById("porcentaje").innerHTML = porcentaje;
      //document.getElementById("barra").style.width = porcentaje;
      // ------------- terminado -----------------
      if( splash_art_imagenes_cargadas == splash_art_numero_total){
        console.log("// precarga de las imagenes de splash-art completada con exito!//"); 
      /* console.log(" ");
      console.log("//carga completada//"); 
      console.log(" "); */
      //document.getElementById("terminado").innerHTML = "//carga completada//";

       // --------------------------------------------------------------------------------------------------------------------------
       // ------------- pre-carga main menu ----------------------------------------------------------------------------------------
       // --------------------------------------------------------------------------------------------------------------------------

      setTimeout(function(){ 
        fadediv(splash,splash_art); 
        main_menu_imagenes_a_cargar.forEach(main_menu_mostrar_imagenes_en_preloader);
        main_menu_numero_total  =  main_menu_imagenes_a_cargar.length;
        function main_menu_mostrar_imagenes_en_preloader(item, index){
          document.getElementById("precarga_main_menu").innerHTML +=    '<img  id="preloaded_element_main_menu'+ index +'" src="img/'+ item +'" >' ;
        }
        var main_menu_imagenes_en_preloader = $('#precarga_main_menu').children('img').map(function(){   return $(this).attr('id'); }).get()
        main_menu_imagenes_en_preloader.forEach( main_menu_precargar_imagenes );

        function main_menu_precargar_imagenes(item, index){
          item ="#"+ item;
        
          $(item).on('load', function() {  
          main_menu_imagenes_cargadas++;
           main_menu_porcentaje =  main_menu_imagenes_cargadas* 100/   main_menu_numero_total;   // saco el porcentaje de las imagenes cargadas
           main_menu_porcentaje =  main_menu_porcentaje.toFixed() //convertir en numero entero
           main_menu_porcentaje =   main_menu_porcentaje + "%" ;
           document.getElementById("preloader_bar").style.width =  main_menu_porcentaje;
           //console.log(   main_menu_porcentaje ); 


          // console.log( { main_menu_imagenes_cargadas , main_menu_numero_total}   ); 
           //console.table( { main_menu_imagenes_cargadas , main_menu_numero_total}   ); 
         

             // ------------- terminado -----------------
      if(  main_menu_imagenes_cargadas ==  main_menu_numero_total){
        console.log("// precarga de las imagenes de main-menu completada con exito!//"); 
      /* console.log(" ");
      console.log("//carga completada//"); 
      console.log(" ");
 */
      setTimeout(function(){  fadediv(splash_art , main_menu );  }, 1000);
    }
          
           //
      //document.getElementById("porcentaje").innerHTML = porcentaje;
      //

            
          })
        }
         
        
        }, 2000);
      
    }
  })// load function
}//precargar_imagenes
 



 }








</script>  
</html>